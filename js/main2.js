var _$_3b2f=["touchmove","preventDefault","addEventListener","body","DOMContentLoaded","attach","menuButton","getElementById","sideBar","mask","loading","onclick","open","toggle","classList","show","remove","ten-drop.wilddog.com","https://ten-drop.wilddogio.com","initializeApp","ref","sync","user","child","userImg","levelRank","userName","canvas","2d","getContext","width","height","leftDrop","NONE","ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","TEN","push","info","restartBtn","level","bestLevel","todayBest","best","loadBg","x","y","generation","direction","colorArr","#43A6FF","#1BD369","#FF7575","prototype","chooseDraw","color","draw_1","draw_2","draw_3","draw_4","draw_5","left","add_broken","dropCollection","right","up","down","save","fillStyle","scale","beginPath","moveTo","PI","arc","closePath","fill","restore","w","h","hor","ver","boardArr","lineTo","stroke","dropArr","brokenArr","clearRect","length","process","splice","isInto","board","floor","gameStart","pause","startTime","endTime","name","init","add","innerHTML","timeChange","clickSelect","getTime","isGameOver","Game over!","offsetX","offsetY","You win! Try your best to go to next level!","nextLevel","You lose!","fly","Level ","hide","setBest","today","Try your best! Give you another "," drop!","style","background-color: rgba(0,0,0,0)","load-item","color:#0886f7;","color: #0886f7;font-size:25px;","\u6b63\u5728\u4e0a\u4f20\u4e2d...","","0","round","userAgent","\u5929 ","\u5c0f\u65f6 "," \u5206\u949f"," \u79d2","src","encrypt","_","update","random","reset","code","response","avatar_url","href","https://bupt-hjm.github.io/ten-drop/","GET","users/profile","user_id","data","ajax","API","on","visitor","value","val","set","toDateString","playTime","rank","UA","time","t","token","once","img","unshift","log","forEach","<p><span class='user-rank'>","</span><img src=","><span class='user-rank-name'>","</span><span class='user-level'>level ","</span></p>","limitToLast","orderByChild","todayRank","switch","rankTitle","\u4eca\u65e5\u5b9e\u65f6\u6392\u884c\u699c","\u5386\u53f2\u6392\u884c\u699c","\u4eca\u65e5","\u5386\u53f2"];document[_$_3b2f[3]][_$_3b2f[2]](_$_3b2f[0],function(a){a[_$_3b2f[1]]()},false);if(_$_3b2f[2] in  document){document[_$_3b2f[2]](_$_3b2f[4],function(){FastClick[_$_3b2f[5]](document[_$_3b2f[3]])},false)};var menuButton=document[_$_3b2f[7]](_$_3b2f[6]);var sideBar=document[_$_3b2f[7]](_$_3b2f[8]);var mask=document[_$_3b2f[7]](_$_3b2f[9]);var loading=document[_$_3b2f[7]](_$_3b2f[10]);menuButton[_$_3b2f[11]]= function(){sideBar[_$_3b2f[14]][_$_3b2f[13]](_$_3b2f[12]);mask[_$_3b2f[14]][_$_3b2f[13]](_$_3b2f[15])};mask[_$_3b2f[11]]= function(){sideBar[_$_3b2f[14]][_$_3b2f[16]](_$_3b2f[12]);mask[_$_3b2f[14]][_$_3b2f[16]](_$_3b2f[15])};var pastPlayTime;var todayPlayTime= new Date();var userData;var config={authDomain:_$_3b2f[17],syncURL:_$_3b2f[18]};var defApp=wilddog[_$_3b2f[19]](config);var ref=wilddog[_$_3b2f[21]]()[_$_3b2f[20]]();var user_ref=ref[_$_3b2f[23]](_$_3b2f[22]);var userImg=document[_$_3b2f[7]](_$_3b2f[24]);var levelRank=document[_$_3b2f[7]](_$_3b2f[25]);var userNameP=document[_$_3b2f[7]](_$_3b2f[26]);var canvas=document[_$_3b2f[7]](_$_3b2f[27]);var ctx=canvas[_$_3b2f[29]](_$_3b2f[28]);canvas[_$_3b2f[30]]= 600;canvas[_$_3b2f[31]]= 600;var w=canvas[_$_3b2f[30]];var h=canvas[_$_3b2f[31]];var leftDropNum=10;var leftDropSpan=document[_$_3b2f[7]](_$_3b2f[32]);var leftDropArr=[_$_3b2f[33],_$_3b2f[34],_$_3b2f[35],_$_3b2f[36],_$_3b2f[37],_$_3b2f[38],_$_3b2f[39],_$_3b2f[40],_$_3b2f[41],_$_3b2f[42],_$_3b2f[43]];for(var i=11;i< 100;i++){leftDropArr[_$_3b2f[44]](i)};var infoP=document[_$_3b2f[7]](_$_3b2f[45]);var restartBtn=document[_$_3b2f[7]](_$_3b2f[46]);var levelP=document[_$_3b2f[7]](_$_3b2f[47]);var bestLevel=document[_$_3b2f[7]](_$_3b2f[48]);var todayBest=document[_$_3b2f[7]](_$_3b2f[49]);var best=document[_$_3b2f[7]](_$_3b2f[50]);var loadBg=document[_$_3b2f[7]](_$_3b2f[51]);var game=null;var Drop=function(){this[_$_3b2f[52]]= w/ 2;this[_$_3b2f[53]]= h/ 2;this[_$_3b2f[54]]= 1;this[_$_3b2f[55]]= null;this[_$_3b2f[56]]= [_$_3b2f[57],_$_3b2f[58],_$_3b2f[59]]};Drop[_$_3b2f[60]]= {process:function(){this[_$_3b2f[61]]()},chooseDraw:function(){var b=(game[_$_3b2f[47]]- 1)% 3;this[_$_3b2f[62]]= this[_$_3b2f[56]][b];switch(this[_$_3b2f[54]]){case 1:this[_$_3b2f[63]]();break;case 2:this[_$_3b2f[64]]();break;case 3:this[_$_3b2f[65]]();break;case 4:this[_$_3b2f[66]]();break;case 5:this[_$_3b2f[67]]();break;default:break}},draw_1:function(){EvenCompEllipse(ctx,this[_$_3b2f[52]],this[_$_3b2f[53]],15,20,this[_$_3b2f[62]])},draw_2:function(){EvenCompEllipse(ctx,this[_$_3b2f[52]],this[_$_3b2f[53]],30,30,this[_$_3b2f[62]])},draw_3:function(){EvenCompEllipse(ctx,this[_$_3b2f[52]],this[_$_3b2f[53]],45,35,this[_$_3b2f[62]])},draw_4:function(){EvenCompEllipse(ctx,this[_$_3b2f[52]],this[_$_3b2f[53]],50,50,this[_$_3b2f[62]])},draw_5:function(){var c=this[_$_3b2f[52]];var d=this[_$_3b2f[53]];if(this[_$_3b2f[55]]== null){this[_$_3b2f[54]]= 6;EvenCompEllipse(ctx,this[_$_3b2f[52]]- 20,this[_$_3b2f[53]],10,10,this[_$_3b2f[62]]);EvenCompEllipse(ctx,this[_$_3b2f[52]]+ 20,this[_$_3b2f[53]],10,10,this[_$_3b2f[62]]);EvenCompEllipse(ctx,this[_$_3b2f[52]],this[_$_3b2f[53]]- 20,10,10,this[_$_3b2f[62]]);EvenCompEllipse(ctx,this[_$_3b2f[52]],this[_$_3b2f[53]]+ 20,10,10,this[_$_3b2f[62]])}else {EvenCompEllipse(ctx,this[_$_3b2f[52]],this[_$_3b2f[53]],10,10,this[_$_3b2f[62]]);EvenCompEllipse(ctx,this[_$_3b2f[52]],this[_$_3b2f[53]],10,10,this[_$_3b2f[62]]);EvenCompEllipse(ctx,this[_$_3b2f[52]],this[_$_3b2f[53]],10,10,this[_$_3b2f[62]]);EvenCompEllipse(ctx,this[_$_3b2f[52]],this[_$_3b2f[53]],10,10,this[_$_3b2f[62]]);return};var f= new Drop();f[_$_3b2f[52]]= c- 20;f[_$_3b2f[53]]= d;f[_$_3b2f[54]]= 5;f[_$_3b2f[55]]= _$_3b2f[68];game[_$_3b2f[70]][_$_3b2f[69]](f);var g= new Drop();g[_$_3b2f[52]]= c+ 20;g[_$_3b2f[53]]= d;g[_$_3b2f[54]]= 5;g[_$_3b2f[55]]= _$_3b2f[71];game[_$_3b2f[70]][_$_3b2f[69]](g);var j= new Drop();j[_$_3b2f[52]]= c;j[_$_3b2f[53]]= d+ 20;j[_$_3b2f[54]]= 5;j[_$_3b2f[55]]= _$_3b2f[72];game[_$_3b2f[70]][_$_3b2f[69]](j);var e= new Drop();e[_$_3b2f[52]]= c;e[_$_3b2f[53]]= d- 20;e[_$_3b2f[54]]= 5;e[_$_3b2f[55]]= _$_3b2f[73];game[_$_3b2f[70]][_$_3b2f[69]](e)}};function EvenCompEllipse(T,m,n,R,S,U){T[_$_3b2f[74]]();T[_$_3b2f[75]]= U;var V=(R> S)?R:S;var W=R/ V;var X=S/ V;T[_$_3b2f[76]](W,X);T[_$_3b2f[77]]();T[_$_3b2f[78]]((m+ R)/ W,n/ X);T[_$_3b2f[80]](m/ W,n/ X,V,0,2* Math[_$_3b2f[79]]);T[_$_3b2f[81]]();T[_$_3b2f[82]]();T[_$_3b2f[83]]()}var Board=function(){this[_$_3b2f[84]]= canvas[_$_3b2f[30]];this[_$_3b2f[85]]= canvas[_$_3b2f[31]];this[_$_3b2f[86]]= 6;this[_$_3b2f[87]]= 6;this[_$_3b2f[88]]= []};Board[_$_3b2f[60]]= {init:function(){for(var i=0;i< this[_$_3b2f[86]];i++){for(var k=0;k< this[_$_3b2f[87]];k++){var m=i* this[_$_3b2f[84]]/ this[_$_3b2f[86]]+ this[_$_3b2f[84]]/ this[_$_3b2f[86]]/ 2;var n=k* this[_$_3b2f[85]]/ this[_$_3b2f[87]]+ this[_$_3b2f[85]]/ this[_$_3b2f[87]]/ 2;var l={x:m,y:n};this[_$_3b2f[88]][_$_3b2f[44]](l)}}},draw:function(){for(var i=0;i<= this[_$_3b2f[86]];i++){ctx[_$_3b2f[74]]();ctx[_$_3b2f[77]]();ctx[_$_3b2f[78]](i* this[_$_3b2f[84]]/ this[_$_3b2f[86]],0);ctx[_$_3b2f[89]](i* this[_$_3b2f[84]]/ this[_$_3b2f[86]],this[_$_3b2f[85]]);ctx[_$_3b2f[81]]();ctx[_$_3b2f[90]]();ctx[_$_3b2f[83]]()};for(var i=0;i<= this[_$_3b2f[87]];i++){ctx[_$_3b2f[74]]();ctx[_$_3b2f[77]]();ctx[_$_3b2f[78]](0,i* this[_$_3b2f[85]]/ this[_$_3b2f[87]]);ctx[_$_3b2f[89]](this[_$_3b2f[84]],i* this[_$_3b2f[85]]/ this[_$_3b2f[87]]);ctx[_$_3b2f[81]]();ctx[_$_3b2f[90]]();ctx[_$_3b2f[83]]()}}};var DropCollection=function(){this[_$_3b2f[91]]= [];this[_$_3b2f[92]]= []};DropCollection[_$_3b2f[60]]= {process:function(){ctx[_$_3b2f[93]](0,0,canvas[_$_3b2f[30]],canvas[_$_3b2f[31]]);for(var i=0;i< this[_$_3b2f[91]][_$_3b2f[94]];i++){if(this[_$_3b2f[91]][i][_$_3b2f[54]]== 6){continue};this[_$_3b2f[91]][i][_$_3b2f[95]]()};for(var i=0;i< this[_$_3b2f[92]][_$_3b2f[94]];i++){if(this[_$_3b2f[92]][i][_$_3b2f[54]]== 6){continue};this[_$_3b2f[92]][i][_$_3b2f[95]]()}},add:function(o){this[_$_3b2f[91]][_$_3b2f[44]](o)},remove:function(o){for(var i=0;i< this[_$_3b2f[91]][_$_3b2f[94]];i++){if(this[_$_3b2f[91]][i]== o){this[_$_3b2f[91]][_$_3b2f[96]](i,1)}}},add_broken:function(o){this[_$_3b2f[92]][_$_3b2f[44]](o)},remove_broken:function(o){for(var i=0;i< this[_$_3b2f[92]][_$_3b2f[94]];i++){if(this[_$_3b2f[92]][i]== o){this[_$_3b2f[92]][_$_3b2f[96]](i,1)}}},fly:function(o){for(var i=0;i< this[_$_3b2f[92]][_$_3b2f[94]];i++){if(this[_$_3b2f[92]][i][_$_3b2f[54]]== 6){continue};if(this[_$_3b2f[97]](this[_$_3b2f[92]][i][_$_3b2f[52]],this[_$_3b2f[92]][i][_$_3b2f[53]])|| this[_$_3b2f[92]][i][_$_3b2f[52]]< -5|| this[_$_3b2f[92]][i][_$_3b2f[52]]> canvas[_$_3b2f[30]]+ 5|| this[_$_3b2f[92]][i][_$_3b2f[53]]> canvas[_$_3b2f[31]]+ 5|| this[_$_3b2f[92]][i][_$_3b2f[53]]<  -5){this[_$_3b2f[92]][i][_$_3b2f[54]]= 6;continue};switch(this[_$_3b2f[92]][i][_$_3b2f[55]]){case _$_3b2f[68]:this[_$_3b2f[92]][i][_$_3b2f[52]]--;break;case _$_3b2f[71]:this[_$_3b2f[92]][i][_$_3b2f[52]]++;break;case _$_3b2f[72]:this[_$_3b2f[92]][i][_$_3b2f[53]]++;break;case _$_3b2f[73]:this[_$_3b2f[92]][i][_$_3b2f[53]]--;break;default:break}}},isInto:function(m,n){var p=game[_$_3b2f[98]];var q=game[_$_3b2f[70]][_$_3b2f[91]];var i=Math[_$_3b2f[99]](m/ (p[_$_3b2f[84]]/ p[_$_3b2f[86]]));var k=Math[_$_3b2f[99]](n/ (p[_$_3b2f[85]]/ p[_$_3b2f[87]]));for(var r=0;r< q[_$_3b2f[94]];r++){if((q[r][_$_3b2f[52]]== (i* p[_$_3b2f[84]]/ p[_$_3b2f[86]]+ p[_$_3b2f[84]]/ p[_$_3b2f[86]]/ 2))&& (q[r][_$_3b2f[53]]== (k* p[_$_3b2f[85]]/ p[_$_3b2f[87]]+ p[_$_3b2f[85]]/ p[_$_3b2f[87]]/ 2))&& (q[r][_$_3b2f[54]]<= 4)){q[r][_$_3b2f[54]]++;if(q[r][_$_3b2f[54]]> 6){q[r][_$_3b2f[54]]= 6};return true}};return false}};var Game=function(){this[_$_3b2f[98]]= null;this[_$_3b2f[70]]= null;this[_$_3b2f[100]]= false;this[_$_3b2f[47]]= 1;this[_$_3b2f[101]]= false;this[_$_3b2f[102]]= 0;this[_$_3b2f[103]]= 0;this[_$_3b2f[104]]= null};Game[_$_3b2f[60]]= {init:function(){ctx[_$_3b2f[93]](0,0,canvas[_$_3b2f[30]],canvas[_$_3b2f[31]]);var p= new Board();p[_$_3b2f[105]]();this[_$_3b2f[98]]= p;var s= new DropCollection();for(var i=0;i< p[_$_3b2f[88]][_$_3b2f[94]];i++){var o= new Drop();o[_$_3b2f[54]]= getNumberInRange(1,4);o[_$_3b2f[52]]= p[_$_3b2f[88]][i][_$_3b2f[52]];o[_$_3b2f[53]]= p[_$_3b2f[88]][i][_$_3b2f[53]];s[_$_3b2f[106]](o)};leftDropSpan[_$_3b2f[107]]= leftDropArr[10];this[_$_3b2f[108]]();this[_$_3b2f[70]]= s;this[_$_3b2f[109]]();this[_$_3b2f[102]]=  new Date()[_$_3b2f[110]]()},clickSelect:function(){var t=this;var p=this[_$_3b2f[98]];canvas[_$_3b2f[11]]= function(u){u[_$_3b2f[1]]();if(this[_$_3b2f[101]]){return};if(leftDropNum== 0|| t[_$_3b2f[111]]()){alert(_$_3b2f[112]);return};t[_$_3b2f[100]]= true;var i=Math[_$_3b2f[99]](u[_$_3b2f[113]]/ (p[_$_3b2f[84]]/ p[_$_3b2f[86]]));var k=Math[_$_3b2f[99]](u[_$_3b2f[114]]/ (p[_$_3b2f[85]]/ p[_$_3b2f[87]]));var q=t[_$_3b2f[70]][_$_3b2f[91]];for(var r=0;r< q[_$_3b2f[94]];r++){if((q[r][_$_3b2f[52]]== (i* p[_$_3b2f[84]]/ p[_$_3b2f[86]]+ p[_$_3b2f[84]]/ p[_$_3b2f[86]]/ 2))&& (q[r][_$_3b2f[53]]== (k* p[_$_3b2f[85]]/ p[_$_3b2f[87]]+ p[_$_3b2f[85]]/ p[_$_3b2f[87]]/ 2))){if(q[r][_$_3b2f[54]]>= 5){continue};q[r][_$_3b2f[54]]++;leftDropNum--;leftDropSpan[_$_3b2f[107]]= leftDropArr[leftDropNum];t[_$_3b2f[70]][_$_3b2f[95]]()}}}},timeChange:function(){var t=this;if(this[_$_3b2f[100]]&& this[_$_3b2f[111]]()&& !this[_$_3b2f[101]]){info[_$_3b2f[107]]= _$_3b2f[115];this[_$_3b2f[101]]= true;setTimeout(function(){t[_$_3b2f[116]]();t[_$_3b2f[101]]= false},1000)};if(leftDropNum== 0&& !this[_$_3b2f[111]]()){info[_$_3b2f[107]]= _$_3b2f[117]};var t=this;setTimeout(function(){t[_$_3b2f[70]][_$_3b2f[118]]();t[_$_3b2f[70]][_$_3b2f[95]]();t[_$_3b2f[108]]()},4)},isGameOver:function(){var v=0;var q=this[_$_3b2f[70]][_$_3b2f[91]];for(var r=0;r< q[_$_3b2f[94]];r++){if(q[r][_$_3b2f[54]]== 6){v++}};if(v== q[_$_3b2f[94]]){return true}else {return false}},nextLevel:function(){this[_$_3b2f[47]]++;levelP[_$_3b2f[107]]= _$_3b2f[119]+ this[_$_3b2f[47]];if(this[_$_3b2f[47]]> +bestLevel[_$_3b2f[107]]){loadBg[_$_3b2f[14]][_$_3b2f[16]](_$_3b2f[120]);this[_$_3b2f[121]](this[_$_3b2f[47]])};if(this[_$_3b2f[47]]> +todayBest[_$_3b2f[107]]){this[_$_3b2f[121]](this[_$_3b2f[47]],_$_3b2f[122])};ctx[_$_3b2f[93]](0,0,canvas[_$_3b2f[30]],canvas[_$_3b2f[31]]);this[_$_3b2f[100]]= false;this[_$_3b2f[70]]= null;var p=this[_$_3b2f[98]];var s= new DropCollection();var v=0;for(var i=0;i< p[_$_3b2f[88]][_$_3b2f[94]];i++){var o= new Drop();o[_$_3b2f[54]]= getNumberInRange(1,4);v+= o[_$_3b2f[54]];o[_$_3b2f[52]]= p[_$_3b2f[88]][i][_$_3b2f[52]];o[_$_3b2f[53]]= p[_$_3b2f[88]][i][_$_3b2f[53]];s[_$_3b2f[106]](o)};var z;if(leftDropNum+ 7<= 20){z= 7}else {z= 20- leftDropNum};leftDropNum+= z;leftDropSpan[_$_3b2f[107]]= leftDropArr[leftDropNum];info[_$_3b2f[107]]= _$_3b2f[123]+ z+ _$_3b2f[124];this[_$_3b2f[70]]= s},setBest:function(I,B){loadBg[_$_3b2f[125]]= _$_3b2f[126];document[_$_3b2f[7]](_$_3b2f[127])[_$_3b2f[125]]= _$_3b2f[128];document[_$_3b2f[7]](_$_3b2f[10])[_$_3b2f[125]]= _$_3b2f[129];loadBg[_$_3b2f[14]][_$_3b2f[16]](_$_3b2f[120]);loading[_$_3b2f[107]]= _$_3b2f[130];var N=userData[_$_3b2f[104]]+ _$_3b2f[131];var H=I+ _$_3b2f[131];var G=H[_$_3b2f[94]];for(var i=0;i< 6- G;i++){H= _$_3b2f[132]+ H};var K= new Date()+ _$_3b2f[131];this[_$_3b2f[103]]=  new Date()[_$_3b2f[110]]();var M=this[_$_3b2f[103]]- this[_$_3b2f[102]];var A=Math[_$_3b2f[99]](M/ (24* 3600* 1000));var D=M% (24* 3600* 1000);var C=Math[_$_3b2f[99]](D/ (3600* 1000));var E=D% (3600* 1000);var J=Math[_$_3b2f[99]](E/ (60* 1000));var F=E% (60* 1000);var L=Math[_$_3b2f[133]](F/ 1000);if(B== _$_3b2f[122]){user_ref[_$_3b2f[23]](N)[_$_3b2f[23]](_$_3b2f[122])[_$_3b2f[142]]({level:I,UA:navigator[_$_3b2f[134]],time:A+ _$_3b2f[135]+ C+ _$_3b2f[136]+ J+ _$_3b2f[137]+ L+ _$_3b2f[138],img:userImg[_$_3b2f[139]],t:M,token:sjcl[_$_3b2f[140]](M+ _$_3b2f[131],I+ _$_3b2f[131]),rank:H+ _$_3b2f[141]+ (3000000000000- M),playTime:K+ _$_3b2f[131]});user_ref[_$_3b2f[23]](N)[_$_3b2f[142]]({todayRank:H+ _$_3b2f[141]+ (3000000000000- M)});todayBest[_$_3b2f[107]]= I;setTimeout(function(){loadBg[_$_3b2f[14]][_$_3b2f[106]](_$_3b2f[120])},1000);return};user_ref[_$_3b2f[23]](N)[_$_3b2f[142]]({level:I,UA:navigator[_$_3b2f[134]],time:A+ _$_3b2f[135]+ C+ _$_3b2f[136]+ J+ _$_3b2f[137]+ L+ _$_3b2f[138],t:M,token:sjcl[_$_3b2f[140]](M+ _$_3b2f[131],I+ _$_3b2f[131]),rank:H+ _$_3b2f[141]+ (3000000000000- M),playTime:K+ _$_3b2f[131],todayRank:H+ _$_3b2f[141]+ (3000000000000- M)});bestLevel[_$_3b2f[107]]= I;setTimeout(function(){loadBg[_$_3b2f[14]][_$_3b2f[106]](_$_3b2f[120])},1000)}};restartBtn[_$_3b2f[11]]= function(){for(var i=0;i< 99999;i++){clearTimeout(i)};game= null;leftDropNum= 10;game=  new Game();game[_$_3b2f[105]]();levelP[_$_3b2f[107]]= _$_3b2f[119]+ 1};function getNumberInRange(Z,Y){var ba=Y- Z;var V=Math[_$_3b2f[143]]();return Math[_$_3b2f[133]](V* ba+ Z)}DUOSHUO[_$_3b2f[157]][_$_3b2f[156]](_$_3b2f[144],function(){var P=function(Q){if(Q[_$_3b2f[145]]== 0){userData= Q[_$_3b2f[146]];userImg[_$_3b2f[139]]= userData[_$_3b2f[147]];userNameP[_$_3b2f[107]]= userData[_$_3b2f[104]];game=  new Game();game[_$_3b2f[105]]();userBest();getRank();getTodayRank()}else {location[_$_3b2f[148]]= _$_3b2f[149]}};var O=function(Q){location[_$_3b2f[148]]= _$_3b2f[149]};DUOSHUO[_$_3b2f[155]][_$_3b2f[154]](_$_3b2f[150],_$_3b2f[151],{"user_id":this[_$_3b2f[153]][_$_3b2f[152]]},P,O)});function userBest(){user_ref[_$_3b2f[168]](_$_3b2f[158],function(bf){var N=userData[_$_3b2f[104]]+ _$_3b2f[131];var bf=bf[_$_3b2f[159]]();var K= new Date()+ _$_3b2f[131];if(bf[N]== undefined){bestLevel[_$_3b2f[107]]= 1;todayBest[_$_3b2f[107]]= 1;user_ref[_$_3b2f[23]](N)[_$_3b2f[160]]({name:N,level:1,UA:navigator[_$_3b2f[134]],time:0,t:0,img:userImg[_$_3b2f[139]],token:sjcl[_$_3b2f[140]](0+ _$_3b2f[131],1+ _$_3b2f[131]),rank:0,playTime:K+ _$_3b2f[131],id:userData[_$_3b2f[152]],today:1,todayRank:0})}else {bestLevel[_$_3b2f[107]]= bf[N][_$_3b2f[47]];if(user_ref[_$_3b2f[23]](N)[_$_3b2f[122]]== 1){user_ref[_$_3b2f[23]](N)[_$_3b2f[23]](_$_3b2f[122])[_$_3b2f[160]]({level:1,UA:navigator[_$_3b2f[134]],time:0,t:0,token:sjcl[_$_3b2f[140]](0+ _$_3b2f[131],1+ _$_3b2f[131]),rank:0,playTime:K+ _$_3b2f[131]})}else {if((bf[N][_$_3b2f[122]]== undefined)&& ( new Date(bf[N][_$_3b2f[162]])[_$_3b2f[161]]()==  new Date(todayPlayTime)[_$_3b2f[161]]())){user_ref[_$_3b2f[23]](N)[_$_3b2f[142]]({todayRank:bf[N][_$_3b2f[163]]});user_ref[_$_3b2f[23]](N)[_$_3b2f[23]](_$_3b2f[122])[_$_3b2f[160]]({level:bf[N][_$_3b2f[47]],UA:bf[N][_$_3b2f[164]],time:bf[N][_$_3b2f[165]],t:bf[N][_$_3b2f[166]],token:bf[N][_$_3b2f[167]],rank:bf[N][_$_3b2f[163]],playTime:bf[N][_$_3b2f[162]]});todayBest[_$_3b2f[107]]= bf[N][_$_3b2f[122]][_$_3b2f[47]];return};if(bf[N][_$_3b2f[122]]== undefined){user_ref[_$_3b2f[23]](N)[_$_3b2f[160]]({level:bf[N][_$_3b2f[47]],UA:bf[N][_$_3b2f[164]],time:bf[N][_$_3b2f[165]],t:bf[N][_$_3b2f[166]],token:bf[N][_$_3b2f[167]],rank:bf[N][_$_3b2f[163]],playTime:bf[N][_$_3b2f[162]],todayRank:1});user_ref[_$_3b2f[23]](N)[_$_3b2f[23]](_$_3b2f[122])[_$_3b2f[160]]({level:1,UA:navigator[_$_3b2f[134]],time:0,t:0,token:sjcl[_$_3b2f[140]](0+ _$_3b2f[131],1+ _$_3b2f[131]),rank:0,playTime:K+ _$_3b2f[131]});return};pastPlayTime= bf[N][_$_3b2f[122]][_$_3b2f[162]];if( new Date(pastPlayTime)[_$_3b2f[161]]()!==  new Date(todayPlayTime)[_$_3b2f[161]]()){user_ref[_$_3b2f[23]](N)[_$_3b2f[23]](_$_3b2f[122])[_$_3b2f[142]]({level:1,UA:navigator[_$_3b2f[134]],time:0,t:0,token:sjcl[_$_3b2f[140]](0+ _$_3b2f[131],1+ _$_3b2f[131]),rank:0,playTime:K+ _$_3b2f[131]})}};todayBest[_$_3b2f[107]]= bf[N][_$_3b2f[122]][_$_3b2f[47]]}})}var todayRankHtml=_$_3b2f[131];var pastRankHtml=_$_3b2f[131];function getRank(){user_ref[_$_3b2f[179]](_$_3b2f[163])[_$_3b2f[178]](8)[_$_3b2f[156]](_$_3b2f[158],function(bd){var bc=[];var bb=8;bd[_$_3b2f[172]](function(bf){var be=bf[_$_3b2f[159]]();try{bc[_$_3b2f[170]]({img:be[_$_3b2f[169]],name:be[_$_3b2f[104]],level:be[_$_3b2f[47]]})}catch(err){console[_$_3b2f[171]](err)}});if(bc[_$_3b2f[94]]< 8){bb= bc[_$_3b2f[94]]};pastRankHtml= _$_3b2f[131];for(var i=0;i< bb;i++){pastRankHtml+= _$_3b2f[173]+ (i+ 1)+ _$_3b2f[174]+ bc[i][_$_3b2f[169]]+ _$_3b2f[175]+ bc[i][_$_3b2f[104]]+ _$_3b2f[176]+ bc[i][_$_3b2f[47]]+ _$_3b2f[177]}})}function getTodayRank(){user_ref[_$_3b2f[179]](_$_3b2f[180])[_$_3b2f[178]](100)[_$_3b2f[156]](_$_3b2f[158],function(bd){todayPlayTime=  new Date()+ _$_3b2f[131];var bc=[];var bb=8;var r=0;bd[_$_3b2f[172]](function(bf){var be=bf[_$_3b2f[159]]();try{if(be[_$_3b2f[162]]!== undefined){if( new Date(be[_$_3b2f[162]])[_$_3b2f[161]]()==  new Date(todayPlayTime)[_$_3b2f[161]]()){bc[_$_3b2f[170]]({img:be[_$_3b2f[169]],name:be[_$_3b2f[104]],level:be[_$_3b2f[47]]});r++};if(r== 8){return}}}catch(err){console[_$_3b2f[171]](err)}});if(bc[_$_3b2f[94]]< 8){bb= bc[_$_3b2f[94]]};todayRankHtml= _$_3b2f[131];for(var i=0;i< bb;i++){todayRankHtml+= _$_3b2f[173]+ (i+ 1)+ _$_3b2f[174]+ bc[i][_$_3b2f[169]]+ _$_3b2f[175]+ bc[i][_$_3b2f[104]]+ _$_3b2f[176]+ bc[i][_$_3b2f[47]]+ _$_3b2f[177]};levelRank[_$_3b2f[107]]= todayRankHtml});loadBg[_$_3b2f[14]][_$_3b2f[106]](_$_3b2f[120])}var switchButton=document[_$_3b2f[7]](_$_3b2f[181]);var rankTitle=document[_$_3b2f[7]](_$_3b2f[182]);switchButton[_$_3b2f[11]]= function(){if(rankTitle[_$_3b2f[107]]== _$_3b2f[183]){levelRank[_$_3b2f[107]]= pastRankHtml;rankTitle[_$_3b2f[107]]= _$_3b2f[184];switchButton[_$_3b2f[107]]= _$_3b2f[185]}else {levelRank[_$_3b2f[107]]= todayRankHtml;rankTitle[_$_3b2f[107]]= _$_3b2f[183];switchButton[_$_3b2f[107]]= _$_3b2f[186]}}